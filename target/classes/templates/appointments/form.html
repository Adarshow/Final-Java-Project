<th:block th:fragment="title">
    <th:block th:text="${appointment.id != null ? 'Edit Appointment' : 'New Appointment'}"></th:block>
</th:block>

<div th:fragment="content">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2 th:text="${appointment.id != null ? 'Edit Appointment' : 'New Appointment'}">Appointment Form</h2>
        <a href="/appointments" class="btn btn-secondary">
            <i class="bi bi-arrow-left me-2"></i>Back to List
        </a>
    </div>
    
    <div class="card shadow-sm">
        <div class="card-body">
            <form th:action="@{/appointments}" th:object="${appointment}" method="post">
                <input type="hidden" th:field="*{id}" />
                
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="patient" class="form-label">Patient</label>
                        <select class="form-select" id="patient" th:field="*{patient}" required>
                            <option value="">Select Patient</option>
                            <option th:each="p : ${patients}" th:value="${p.id}" th:text="${p.name}"></option>
                        </select>
                    </div>
                    <div class="col-md-6">
                        <label for="doctor" class="form-label">Doctor</label>
                        <select class="form-select" id="doctor" th:field="*{doctor}" required>
                            <option value="">Select Doctor</option>
                            <option th:each="d : ${doctors}" th:value="${d.id}" 
                                    th:text="${d.name + ' (' + d.specialization + ')'}"></option>
                        </select>
                    </div>
                </div>
                
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="dateTime" class="form-label">Date & Time</label>
                        <input type="datetime-local" class="form-control" id="dateTime" th:field="*{dateTime}" required />
                    </div>
                    <div class="col-md-6" th:if="${appointment.id != null}">
                        <label for="status" class="form-label">Status</label>
                        <select class="form-select" id="status" th:field="*{status}">
                            <option th:each="status : ${statuses}" th:value="${status}" th:text="${status}"></option>
                        </select>
                    </div>
                </div>
                
                <div class="mb-3">
                    <label for="reason" class="form-label">Reason for Visit</label>
                    <textarea class="form-control" id="reason" th:field="*{reason}" rows="3"></textarea>
                </div>
                
                <div class="d-flex justify-content-end gap-2">
                    <button type="reset" class="btn btn-secondary">Reset</button>
                    <button type="submit" class="btn btn-primary">Save</button>
                </div>
            </form>
        </div>
    </div>
</div>
